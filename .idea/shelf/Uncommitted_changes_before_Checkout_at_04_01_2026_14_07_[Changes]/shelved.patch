Index: puzzle.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import matplotlib.pyplot as plt\r\nimport numpy as np\r\n\r\nfrom components import Line, Arc\r\nfrom camera import Camera\r\nimport cv2\r\nimport os\r\n\r\n# img = cv2.imread(os.path.join(\"podlozka\", \"Image__2025-11-26__11-22-06.bmp\"))\r\n# img = cv2.imread(os.path.join(\"podlozka\", \"Image__2025-11-26__11-23-54.bmp\"))\r\n# img = cv2.imread(os.path.join(\"podlozka\", \"Image__2025-11-26__11-21-48.bmp\"))\r\n\r\n# img = cv2.imread(os.path.join(\"podlozka\", \"Image__2025-11-26__11-23-27.bmp\"))\r\n\r\n# camera = Camera()\r\n# rvecs, tvecs, ids = camera.detect_markers(img, draw=True)\r\n# cv2.imshow(\"img\", img)\r\n# mid_point, R = camera.get_mid_points(img)\r\n\r\n\r\nclass Puzzle:\r\n    \"\"\"\r\n        Parent Puzzle class - defines general template for other children puzzles\r\n        Defines unified methods get_points() and show()\r\n    \"\"\"\r\n\r\n    def __init__(self):\r\n        self.puzzle_type: str = None\r\n        self.components: list[Line, Arc] = None\r\n\r\n    def _init_components(self) -> list[Line, Arc]:\r\n        # NOTE that the return value is a list, if only one component is returned\r\n        # do not forget to pack it in a list! e.g. PuzzleA\r\n        pass\r\n\r\n    def get_forward_trajectory(self) -> np.array:\r\n        points = [c.get_descrete_points() for c in self.components]\r\n\r\n        points = np.flip(np.vstack([*points]))\r\n        M = np.array([[0, 0, 1], [0, 1, 0], [1, 0, 0]])\r\n        points = [M @ p for p in points]\r\n        \r\n        points = [R @ p for p in points] # Rotation\r\n\r\n        return points   \r\n\r\n    def get_reverse_trajectory(self) -> np.array:\r\n        points = [c.get_descrete_points() for c in self.components]\r\n\r\n        points = np.vstack([*points])        \r\n        points = [R @ p for p in points] # Rotation\r\n        # print(points.shape)\r\n        return points\r\n\r\n    def show_forward_trajectory(self) -> None:\r\n        points = self.get_forward_trajectory()\r\n        \r\n        points = np.array(points)\r\n\r\n        fig = plt.figure()\r\n        ax = fig.add_subplot(projection=\"3d\")\r\n        ax.scatter(points[:, 0], points[:, 1], points[:, 2])\r\n        # ax.scatter(0, 0, 0)\r\n        ax.quiver(0, 0, 0, 100, 0, 0, color='red')\r\n        ax.quiver(0, 0, 0, 0, 100, 0, color='green')\r\n        ax.quiver(0, 0, 0, 0, 0, 100, color='blue')\r\n        ax.set_aspect('equal')\r\n        plt.show()\r\n\r\n    def show_reverse_trajectory(self) -> None:\r\n        points = self.get_reverse_trajectory()\r\n        points = np.array(points)\r\n        # points = [R @ p for p in points] # Rotation\r\n        \r\n        fig = plt.figure()\r\n        ax = fig.add_subplot(projection=\"3d\")\r\n        ax.scatter(points[:, 0], points[:, 1], points[:, 2])\r\n        ax.quiver(0, 0, 0, 100, 0, 0, color='red')\r\n        ax.quiver(0, 0, 0, 0, 100, 0, color='green')\r\n        ax.quiver(0, 0, 0, 0, 0, 100, color='blue')\r\n        ax.set_aspect('equal')\r\n        plt.show()\r\n\r\n\r\nclass PuzzleA(Puzzle):\r\n    def __init__(self):\r\n        self.puzzle_type = \"B\"\r\n        self.components = self._init_components()\r\n\r\n    def _init_components(self) -> list:\r\n        # ----- line1 -----\r\n        p1 = np.array([0, 0, 0])\r\n        p2 = np.array([0, 0, 200])\r\n        line1 = Line(p1, p2)\r\n\r\n        return (line1,)\r\n\r\n\r\nclass PuzzleB(Puzzle):\r\n    def __init__(self):\r\n        self.puzzle_type = \"B\"\r\n        self.components = self._init_components()\r\n\r\n    def _init_components(self) -> list:\r\n        # ----- line1 -----\r\n        p1 = np.array([0, 0, 0])\r\n        p2 = np.array([0, 0, 80])\r\n        line1 = Line(p1, p2)\r\n\r\n        # ----- line2 -----\r\n        p1 = np.array([0, 0, 80])\r\n        p2 = np.array([70, 0, 150])\r\n        line2 = Line(p1, p2)\r\n\r\n        # ----- line3 -----\r\n        p1 = np.array([70, 0, 150])\r\n        p2 = np.array([70, 0, 200])\r\n        line3 = Line(p1, p2)\r\n\r\n        return line1, line2, line3\r\n\r\n\r\nclass PuzzleC(Puzzle):\r\n    def __init__(self):\r\n        self.puzzle_type = \"C\"\r\n        self.components = self._init_components()\r\n\r\n    def _init_components(self) -> list:\r\n        # ----- line1 -----\r\n        p1 = np.array([0, 0, 0])\r\n        p2 = np.array([0, 0, 50])\r\n        line1 = Line(p1, p2)\r\n\r\n        # ----- line2 -----\r\n        p1 = np.array([0, 0, 50])\r\n        p2 = np.array([-50, 0, 100])\r\n        line2 = Line(p1, p2)\r\n\r\n        # ----- line3 -----\r\n        p1 = np.array([-50, 0, 100])\r\n        p2 = np.array([-50, -50, 150])\r\n        line3 = Line(p1, p2)\r\n\r\n        # ----- line4 -----\r\n        p1 = np.array([-50, -50, 150])\r\n        p2 = np.array([-50, -50, 200])\r\n        line4 = Line(p1, p2)\r\n        return line1, line2, line3, line4\r\n\r\n\r\nclass PuzzleD(Puzzle):\r\n    def __init__(self):\r\n        self.puzzle_type = \"D\"\r\n        self.components = self._init_components()\r\n\r\n    def _init_components(self) -> list:\r\n        # ----- line1 -----\r\n        p1 = np.array([0, 0, 0])\r\n        p2 = np.array([0, 0, 30])\r\n        line1 = Line(p1, p2)\r\n\r\n        # ----- line2 -----\r\n        p1 = np.array([0, 0, 30])\r\n        p2 = np.array([-15, 0, 45])\r\n        line2 = Line(p1, p2)\r\n\r\n        # ----- line3 -----\r\n        p1 = np.array([-15, 0, 45])\r\n        p2 = np.array([-15, 0, 105])\r\n        line3 = Line(p1, p2)\r\n\r\n        # ------ arc1 ------\r\n        center = np.array([35, 0, 105])\r\n        diameter = 100\r\n        angle_start = np.pi / 2\r\n        angle_end = np.pi\r\n        arc1 = Arc(center, diameter, angle_start, angle_end, plane=\"XZ\")\r\n\r\n        # ----- line4 -----\r\n        p1 = np.array([35, 0, 155])\r\n        p2 = np.array([85, 0, 155])\r\n        line4 = Line(p1, p2)\r\n\r\n        return line1, line2, line3, arc1, line4\r\n\r\n\r\nclass PuzzleE(Puzzle):\r\n    def __init__(self):\r\n        self.puzzle_type = \"E\"\r\n        self.components = self._init_components()\r\n\r\n    def _init_components(self) -> list:\r\n        # ----- line1 -----\r\n        p1 = np.array([0, 0, 0])\r\n        p2 = np.array([0, 0, 30])\r\n        line1 = Line(p1, p2)\r\n\r\n        # ----- line2 -----\r\n        p1 = np.array([0, 0, 30])\r\n        p2 = np.array([-17.321, 0, 60])\r\n        line2 = Line(p1, p2)\r\n\r\n        # ----- line3 -----\r\n        p1 = np.array([-17.321, 0, 60])\r\n        p2 = np.array([-17.321, -50, 110])\r\n        line3 = Line(p1, p2)\r\n\r\n        # ------ arc1 ------\r\n        center = np.array([-17.321, 0, 110])\r\n        diameter = 100\r\n        angle_start = np.pi / 2\r\n        angle_end = np.pi\r\n        arc1 = Arc(center, diameter, angle_start, angle_end, plane=\"YZ\")\r\n\r\n        # ----- line4 -----\r\n        p1 = np.array([-17.321, 0, 160])\r\n        p2 = np.array([32.679, 50, 160])\r\n        line4 = Line(p1, p2)\r\n\r\n        # ----- line5 -----\r\n        p1 = np.array([32.679, 50, 160])\r\n        p2 = np.array([32.679, 100, 160])\r\n        line5 = Line(p1, p2)\r\n\r\n        return line1, line2, line3, arc1, line4, line5\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    puzzle = PuzzleD()\r\n    # points = puzzle.get_forward_trajectory()\r\n    # puzzle.show_forward_trajectory()\r\n    points = puzzle.get_reverse_trajectory()\r\n    puzzle.show_reverse_trajectory()\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/puzzle.py b/puzzle.py
--- a/puzzle.py	(revision c111603ed7ad519da92ef13a6a49c6b587f503fb)
+++ b/puzzle.py	(date 1767528499830)
@@ -17,11 +17,12 @@
 # cv2.imshow("img", img)
 # mid_point, R = camera.get_mid_points(img)
 
+ 
 
 class Puzzle:
     """
         Parent Puzzle class - defines general template for other children puzzles
-        Defines unified methods get_points() and show()
+        Defines unified methods get_points() and show() som
     """
 
     def __init__(self):
